{
  "entities": {
    "Gene": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Gene",
      "type": "object",
      "description": "Represents a gene with its properties, space effects, health risks, and variants.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the gene entity."
        },
        "symbol": {
          "type": "string",
          "description": "The symbol of the gene (e.g., BRCA1)."
        },
        "name": {
          "type": "string",
          "description": "The full name of the gene (e.g., Breast cancer type 1 susceptibility protein)."
        },
        "sequence": {
          "type": "string",
          "description": "The DNA sequence of the gene."
        },
        "chromosome": {
          "type": "string",
          "description": "The chromosome where the gene is located."
        },
        "start": {
          "type": "number",
          "description": "The start position of the gene on the chromosome."
        },
        "end": {
          "type": "number",
          "description": "The end position of the gene on the chromosome."
        },
        "strand": {
          "type": "string",
          "description": "The strand of the gene (+ or -)."
        },
        "function": {
          "type": "string",
          "description": "The function of the gene."
        },
        "biotype": {
          "type": "string",
          "description": "The biotype of the gene (e.g., protein_coding)."
        },
        "healthRisks": {
          "type": "array",
          "description": "List of health risks associated with the gene.",
          "items": {
            "type": "string"
          }
        },
        "spaceEffects": {
          "type": "string",
          "description": "Space related effects of the gene."
        },
        "variants": {
          "type": "array",
          "description": "List of variants of the gene.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "symbol",
        "name",
        "sequence",
        "function"
      ]
    },
    "DnaAnalysis": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DnaAnalysis",
      "type": "object",
      "description": "Represents a DNA analysis performed on a sequence.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the DNA analysis entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N DnaAnalysis) The ID of the user who performed the analysis."
        },
        "originalSequence": {
          "type": "string",
          "description": "The original DNA sequence that was analyzed."
        },
        "sequenceLength": {
          "type": "number",
          "description": "The length of the DNA sequence."
        },
        "gcContent": {
          "type": "number",
          "description": "The GC content of the DNA sequence."
        },
        "analysisDate": {
          "type": "string",
          "description": "The date and time when the analysis was performed.",
          "format": "date-time"
        },
        "results": {
          "type": "string",
          "description": "The analysis results, stored as JSON string."
        },
        "spacePredictions": {
          "type": "string",
          "description": "Predictions related to space effects, stored as JSON string."
        }
      },
      "required": [
        "id",
        "userId",
        "originalSequence",
        "sequenceLength",
        "gcContent",
        "analysisDate"
      ]
    },
    "SpaceResearch": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SpaceResearch",
      "type": "object",
      "description": "Represents a space research study.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the space research study."
        },
        "title": {
          "type": "string",
          "description": "The title of the space research study."
        },
        "findings": {
          "type": "string",
          "description": "The findings of the space research study."
        },
        "genesInvolved": {
          "type": "array",
          "description": "List of genes involved in the space research study.",
          "items": {
            "type": "string"
          }
        },
        "implications": {
          "type": "string",
          "description": "The implications of the space research study."
        },
        "reference": {
          "type": "string",
          "description": "The reference of the space research study."
        }
      },
      "required": [
        "id",
        "title",
        "findings",
        "implications",
        "reference"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/genes/{geneId}",
        "definition": {
          "entityName": "Gene",
          "schema": {
            "$ref": "#/backend/entities/Gene"
          },
          "description": "Stores gene data. Readable by all authenticated users. Writable by admins only.",
          "params": [
            {
              "name": "geneId",
              "description": "The unique identifier for the gene."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/dna_analyses/{analysisId}",
        "definition": {
          "entityName": "DnaAnalysis",
          "schema": {
            "$ref": "#/backend/entities/DnaAnalysis"
          },
          "description": "Stores DNA analysis data for each user. Users can only read/write their own analysis data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "analysisId",
              "description": "The unique identifier for the DNA analysis."
            }
          ]
        }
      },
      {
        "path": "/space_research/{studyId}",
        "definition": {
          "entityName": "SpaceResearch",
          "schema": {
            "$ref": "#/backend/entities/SpaceResearch"
          },
          "description": "Stores space research data. Readable by all authenticated users. Writable by admins only.",
          "params": [
            {
              "name": "studyId",
              "description": "The unique identifier for the space research study."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support a space biology knowledge engine, prioritizing authorization independence, clarity, and scalability. It incorporates denormalization to avoid chained `get()` calls in security rules, ensuring atomic operations and simplifying debugging. Structural segregation ensures that collections contain data with homogenous security needs, facilitating simpler rules and more secure `list` operations.  The design employs consistent access modeling for private and collaborative data.\n\nGenes are stored in a top-level `/genes` collection, readable by all authenticated users but writable only by admins (simulated by no write access for normal users). DNA analyses are stored in `/users/{userId}/dna_analyses/{analysisId}` to ensure that a user can only read or write their own analyses. Space research data is stored in the `/space_research` collection and is readable by all authenticated users, but only writable by admins (simulated by no write access for normal users).  This structure adheres to the principles outlined, including authorization independence by avoiding `get()` calls, clear separation of public and private data, and predictable schemas."
  }
}